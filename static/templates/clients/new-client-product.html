<form >
<div class="row">
  <div class="col-md-offset-1 col-md-2">
    <button ng-click="vm.reset(); vm.options=vm.clubcards; vm.product='card'"
    class="btn btn-block btn-warning">
      Клубная карта
    </button>
  </div>

  <div class="col-md-2">
    <button ng-click="vm.reset(); vm.options=vm.aquaaerobicses; vm.product='aqua'" class="btn btn-block btn-info">
      Аква аэробика
    </button>
  </div>

  <div class="col-md-2">
    <button ng-click="vm.reset(); vm.options=vm.tickets; vm.product='ticket'" class="btn btn-block btn-success">
      Абонемент
    </button>
  </div>

  <div class="col-md-2">
    <button ng-click="vm.reset(); vm.options=vm.personals; vm.product='personal'" class="btn btn-block btn-danger">
      Персональные тренировки
    </button>
  </div>

  <div class="col-md-2">
    <button ng-click="vm.reset(); vm.options=vm.timings; vm.product='timing'" class="btn btn-block btn-default">
      С учетом времени
    </button>
  </div>
</div>
<br/>

<div class="panel panel-default">
  <div class="panel-body">
      <center>
        <strong class="col-md-3">{{ vm.product_choose(vm.product) }}</strong>
        <div class="col-md-3">
          <select ng-model="vm.fdata.product"
           class="container-full" 
           ng-options="o.id as o.name for o in vm.options">
          </select>
        </div>
      </center>
   </div>
</div>

<div class="col-md-12">
  <div class="col-md-3">
    <label>Стоимость: {{ vm.fdata.price }}</label>
  </div>
  <div class="col-md-3">
    <label >Скидка: </label>
    <input class="sinput" type="number" min="0" max="100" step="0.01"
    ng-model="vm.fdata.discount"> %
  </div>
  <div class="col-md-3">
    <label class="text-danger">Итого: 
    {{ vm.total() }}</label>
  </div>
  <div class="col-md-3">
    <label >Оплата: </label>
    <input class="sinput" type="number" min="0" step="0.01"
    ng-model="vm.fdata.amount" value="vm.total">
  </div>  
<br/><br/>
</div>

<div class="col-md-12">
  <label class="col-md-2 control-label">Вид оплаты:</label>
    <div class="col-md-2">
    <label class="control-label">Наличные</label>
      <input ng-model="vm.fdata.payment_type" type="radio"
      name="payment_type" value="1">
    </div>
    <div class="col-md-2">
      <label class="control-label">Без наличные</label>
      <input ng-model="vm.fdata.payment_type" type="radio"
      name="payment_type" value="2">
    </div>
    <div class="col-md-2">
      <label class="control-label">Банк</label>
      <input ng-model="vm.fdata.payment_type" type="radio"
      name="payment_type" value="3">
    </div>
    <div class="col-md-2">
      <label class="control-label">Иное</label>
      <input ng-model="vm.fdata.payment_type" type="radio"
      name="payment_type" value="0">
    </div>
</div>

<br/><br/>

<br/><br/>
<div ng-show="vm.total() > vm.fdata.amount">
  <label class="col-md-2 control-label">
  График доплаты
  </label>
  <div class="col-md-2"> 
    <button type="button" class="btn-add-credit btn btn-xs btn-success btn-block" 
    ng-click="vm.add_credit()">Добавить</button>
  </div>
  <div class="col-md-2">
    <input class="sinput" type="number" ng-model="vm.credit_amount">
  </div>
  <div class="col-md-2">
    <input class="date sinput" type="text" ng-model="vm.credit_date">
  </div>
  <div class="col-md-3">
    <label class="text-primary">Остаток: 
    {{ vm.chk_amount() }}</label>
  </div>
  <div class="col-md-12">
    <table class="table">
      <tr ng-repeat="credit in vm.credits">
        <td>
          {{ $index + 1 }}
        </td>
        <td>
          {{ credit.amount }}
        </td>
        <td>
          {{ credit.date | date:'dd.MM.yyyy' }}
        </td>
        <td>
          <button type="button" class="btn btn-xs btn-danger" 
      ng-click="vm.remove_credit($index)">Убрать</button>
        </td>
      </tr>
    </table>
  </div>
</div>
<br/><br/>
  <div class="col-md-3">
    <a href="#/cardclient/{{ vm.client.id}}/" class="btn btn-default pull-left">отмена</a>
  </div>  

  <div class="col-md-offset-6 col-md-3">
    <button type="submit" class="btn btn-primary pull-right" ng-click="vm.submit()">Отправить</button>
  </div>        
</form>

<script type="text/javascript">
  jQuery(function($){
    $(".date").mask("99.99.99");
});
</script>